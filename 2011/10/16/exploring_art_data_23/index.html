<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Exploring Art Data 23 &middot; robmyers
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,900' rel='stylesheet' type='text/css'>
  <link href="/public/css/robmyers.css" rel="stylesheet">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- Slideshow -->
  <script src="/public/lightbox/js/jquery-1.11.0.min.js"></script>
  <script src="/public/lightbox/js/lightbox.min.js"></script>
  <link href="/public/lightbox/css/lightbox.css" rel="stylesheet">
</head>


  <body>

    <div class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          robmyers
        </a>
      </h1>
      <p class="lead">"self-defined artist, writer and hacker" – MakeTank</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>
      <a class="sidebar-nav-item" href="/about/">About Me</a>

      
      
        
      
        
          <a class="sidebar-nav-item" href="/abcd/">ABCD</a>
        
      
        
      
        
      
        
          <a class="sidebar-nav-item" href="/art-data/">Art Data</a>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          <a class="sidebar-nav-item" href="/critique/">Critique</a>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          <a class="sidebar-nav-item" href="/free-culture/">Free Culture</a>
        
      
        
      
        
          <a class="sidebar-nav-item" href="/glitch-aesthetics/">Glitch Aesthetics</a>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          <a class="sidebar-nav-item" href="/shareable-readymades/">Shareable Readymades</a>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      

      <br>

      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>

     </nav>
    
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Exploring Art Data 23</h1>
  <span class="post-date">16 Oct 2011</span>
  <p>Having written a command-line interface (CLI), we will now write a graphical user interface (GUI). GUIs can be an effective way of managing the complexity of software, but their disadvantage is that they usually cannot be effectively scripted like CLI applications and that they usually cannot be extended or modified as simply or as deeply as code run from a REPL.</p>

<p>That said, if software is intended as a stand-alone tool for performing tasks that will not be repeated and do not require much setup, a GUI can be very useful. So we will write one for the code in image-properties.r</p>

<p>As with the CLI version, we will run this code using RScript. The script can be run from the command line, or an icon for it can be created in the operating system’s applications menu or dock.
`</p>

<pre><code>#!/usr/bin/env Rscript
## -*- mode: R -*-
</code></pre>

<p><code>
The GUI framework that we will use is the cross-platform gWidgets library. I have set it up to use Gtk here, but Qt and Tk versions are available as well. You can find out more about gWidgets at [http://cran.r-project.org/web/packages/gWidgets/index.html](http://cran.r-project.org/web/packages/gWidgets/index.html).
</code></p>

<pre><code>## install.packages("gWidgetsRGtk2", dep = TRUE)
require(gWidgets)
options("guiToolkit"="RGtk2")
</code></pre>

<p><code>
We source properties-plot.r to load the code that we will use to plot the image once we have gathered all the configuration information we need using the GUI
</code></p>

<pre><code>source('properties-plot.r')
</code></pre>

<p>`
The first part of the GUI that we define is the top level window and layout. The layout of the top level window is a tabbed pane of the kind used by preferences dialogs and web browsers. We use this to organise the large number of configuration options for the code and to present them to the user in easily understood groupings.</p>

<p>Notice the use of “layout” objects as matrices to arrange interface widgets such as buttons within the window and later within each page of the “notebook” tabbed view.
`</p>

<pre><code>win&lt;-gwindow("gui", visible=FALSE)
layout&lt;-glayout(container=win)
nb&lt;-gnotebook(expand=TRUE)
layout[1,1]&lt;-nb
layout[2,1]&lt;-gbutton("Render Image", callback=renderImage)
</code></pre>

<p><code>
The first tab contains code to create and handle input from user interface elements for selecting the kind of plot, the data file and folder of images to use, and the file to save the plot as if required. It also allows the user to specify which properties from the data file to plot.
</code></p>

<pre><code>table&lt;-glayout(container=nb, label="Files And Columns")
table[1,1]&lt;-glabel("Render:")
table[1,2]&lt;-gcombobox(c("Display","PDF", "PNG"), handler=updateSaveFile)
table[2,1]&lt;-glabel("Data File:")
dataFileGedit&lt;-gedit("")
table[2,2]&lt;-dataFileGedit
table[2,3]&lt;-gbutton("Set Data File...", handler=setDataFile)
table[3,1]&lt;-glabel("Image Folder:")
imageFolderGedit&lt;-gedit("")
table[3,2]&lt;-imageFolderGedit
table[3,3]&lt;-gbutton("Set Image Folder...", handler=setImageFolder)
saveImageLabel&lt;-glabel("Save Image:", enable=FALSE)
table[4,1]&lt;-saveImageLabel
saveImageGedit&lt;-gedit("", enable=FALSE)
table[4,2]&lt;-saveImageGedit
saveImageButton&lt;-gbutton("Set Image File...", enable=FALSE, handler=setSaveFile)
table[4,3]&lt;-saveImageButton
enableSaveFile(FALSE)
table[5,1]&lt;-glabel("X Value Column:")
table[5,2]&lt;-gedit("brightness_median")
table[6,1]&lt;-glabel("Y Value Column:")
table[6,2]&lt;-gedit("saturation_median")
table[7,1]&lt;-glabel("Y Value Column:")
table[7,2]&lt;-gedit("saturation_median")
table[8,1]&lt;-glabel("Filename Column:")
table[8,2]&lt;-gedit("filename")
table[9,1]&lt;-glabel("Icon Label Column:")
table[9,2]&lt;-gedit("filename")
</code></pre>

<p><code>
We use functions to allow the user to choose the data file, image folder, and save file. Using the GUI framework's built-in support for file choosing makes this code remarkably compact.
</code></p>

<pre><code>setDataFile&lt;-function(button, ...){
choice&lt;-gfile(type="open", text="Select the data file...",
filter=list("All files"=list(patterns=c("*")),
"TSV files"=list(patterns=c("*.txt"))))
## No choice == NA
if(! is.na(choice)){
svalue(dataFileGedit)&lt;-choice
}
}
setImageFolder&lt;-function(button, ...){
choice&lt;-gfile(type="selectdir", text="Select the image folder...")
## No choice == NA
if(! is.na(choice)){
svalue(imageFolderGedit)&lt;-choice
}
}
initialSaveFile&lt;-NA
filterSaveFile&lt;-NA
setSaveFile&lt;-function(button, ...){
choice&lt;-gfile(type="save", text="Select the file to save to...",
initialfilename=initialSaveFile,
filter=list("All files"=list(patterns=c("*")), filterSaveFile))
## No choice == NA
if(! is.na(choice)){
svalue(imageFolderGedit)&lt;-choice
}
}
</code></pre>

<p><code>
Often part of the GUI must be updated, enabled or disabled in response to changes in another part. When the user selects a "Display" plot we need not require the user to select a file to save the plot in, as the plot will be displayed in a window on the screen. The next functions implement this logic.
</code></p>

<pre><code>updateSaveFile&lt;-function(combo, ...){
print(svalue(combo$obj))
enableSaveFile(svalue(combo$obj) != "Display")
if(svalue(combo$obj) == "PDF"){
initialSaveFile&lt;&lt;-"image.pdf"
filterSaveFile&lt;&lt;-list("PDF files"=list(patterns("*.pdf")))
} else if(svalue(combo$obj) == "PNG"){
initialSaveFile&lt;&lt;-"image.png"
filterSaveFile&lt;&lt;-list("PNG files"=list(patterns("*.png")))
}
}
enableSaveFile&lt;-function(enable){
print(enable)
enabled(saveImageLabel)&lt;-enable
enabled(saveImageGedit)&lt;-enable
enabled(saveImageButton)&lt;-enable
}
</code></pre>

<p><code>
The second tab contains fields to allow the user to configure the basic visual properties of the plot, its height, width, and background colour.
</code></p>

<pre><code>table&lt;-glayout(container=nb, label="Image")
table[1,1]&lt;-glabel("Width:")
table[1,2]&lt;-gtext(as.character(plotWidth))
table[2,1]&lt;-glabel("Height:")
table[2,2]&lt;-gtext(as.character(plotHeight))
table[3,1]&lt;-glabel("Background Colour:")
table[3,2]&lt;-gtext("")
</code></pre>

<p><code>
The third tab allows the user to control the plotting of images, labels, points and lines.
</code></p>

<pre><code>table&lt;-glayout(container=nb, label="Plotting")
table[1,1]&lt;-gcheckbox(text="Draw Images", checked=true)
table[2,1]&lt;-glabel("Width:")
table[2,2]&lt;-gtext(thumbnailWidth)
table[3,1]&lt;-gcheckbox(text="Draw Labels", checked=true)
table[4,1]&lt;-glabel("Label Scale:")
table[4,2]&lt;-gtext(pointSize)
table[5,1]&lt;-glabel("Label Colour:")
table[5,2]&lt;-gtext("")
table[6,1]&lt;-gcheckbox(text="Draw Points", checked=true)
table[7,1]&lt;-glabel("Point Scale:")
table[7,2]&lt;-gtext(pointSize)
table[8,1]&lt;-glabel("Point Style:")
table[8,2]&lt;-gtext(pointStyle)
table[9,1]&lt;-glabel("Point Colour:")
table[9,2]&lt;-gtext("")
table[10,1]&lt;-gcheckbox(text="Draw Lines", checked=true)
table[11,1]&lt;-glabel("Line Width:")
table[11,2]&lt;-gtext(pointSize)
table[12,1]&lt;-glabel("Line Colour:")
table[12,2]&lt;-gtext("")
</code></pre>

<p><code>
The fourth (and final) tab allows the user to manage how the axes are plotted.
</code></p>

<pre><code>table4&lt;-glayout(container=nb, label="Axes")
table4[1,1]&lt;-gcheckbox(text="Draw Axes", checked=true)
table4[2,1]&lt;-glabel("Axis Round Digit Precision:")
table4[2,2]&lt;-gslider(from=0, to=10, by=1, value=axisRoundDigits)
table4[3,1]&lt;-glabel("X Axis Label:")
table4[3,2]&lt;-gtext(axisLabelX)
table4[4,1]&lt;-glabel("Y Axis Label:")
table4[4,2]&lt;-gtext(axisLabelY)
table4[5,1]&lt;-glabel("Axis Colour:")
table4[5,2]&lt;-gtext("")
</code></pre>

<p><code>
Having created the contents of each tab, we set the initial tab that will be shown to the user and display the window on the screen.
</code></p>

<pre><code>svalue(nb)&lt;-1
visible(win)&lt;-TRUE
</code></pre>

<p><code>
Next we will write code to set the values of the global variables from the GUI, and perform a render. Until then, we can define a do-nothing renderImage function to allow us to run and test the GUI code.
</code></p>

<pre><code>renderImage&lt;-function(){
FALSE
}
</code></pre>

<p>`
If we save this code in a file called propgui and make it executable using the shell command:</p>

<p>chmod +x propgui</p>

<p>We can call the script from the command line like this:</p>

<p>./propgui</p>

<p>We can enter values into the fields of the GUI, choose files, and press buttons (although pressing the Render button will of course have no effect yet).</p>


</div>

<ul class="share-buttons">
  <li><a href="https://www.reddit.com/r/robmyers/submit?url=https://robmyers.org/2011/10/16/exploring_art_data_23/&title=Exploring Art Data 23" target="_blank" title="Submit to Reddit"><img src="/public/flat_web_icon_set/black/Reddit.png"></a></li>
  <li><a href="https://twitter.com/intent/tweet?source=https://robmyers.org/2011/10/16/exploring_art_data_23/&text=Exploring Art Data 23:%20https://robmyers.org/2011/10/16/exploring_art_data_23/&via=robmyers" target="_blank" title="Tweet"><img src="/public/flat_web_icon_set/black/Twitter.png"></a></li>
  <li><a href="https://wordpress.com/press-this.php?u=https://robmyers.org/2011/10/16/exploring_art_data_23/&t=Exploring Art Data 23" target="_blank" title="Publish on WordPress"><img src="/public/flat_web_icon_set/black/Wordpress.png"></a></li>
  <li><a href="https://www.tumblr.com/share?v=3&u=https://robmyers.org/2011/10/16/exploring_art_data_23/&t=Exploring Art Data 23&s=" target="_blank" title="Post to Tumblr"><img src="/public/flat_web_icon_set/black/Tumblr.png"></a></li>
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=https://robmyers.org/2011/10/16/exploring_art_data_23/&t=Exploring Art Data 23" title="Share on Facebook" target="_blank"><img src="/public/flat_web_icon_set/black/Facebook.png"></a></li>
  <li><a href="mailto:?subject=Exploring Art Data 23&body=https://robmyers.org/2011/10/16/exploring_art_data_23/" target="_blank" title="Email"><img src="/public/flat_web_icon_set/black/Email.png"></a></li>
</ul>


<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2015/06/11/trying-jekyll/">
            Trying Jekyll
            <small>11 Jun 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2015/05/01/my-little-penny-bitcoin-is-magic/">
            My Little Penny - Bitcoin Is Magic
            <small>01 May 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2015/02/05/art-for-algorithms/">
            Art For Algorithms
            <small>05 Feb 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

    </div>

  </body>
</html>
